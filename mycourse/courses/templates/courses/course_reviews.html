{% extends 'courses/base.html' %}

{% block content %}
<div class="reviews-container">
    <h2>⭐ Đánh giá khóa học: {{ course.title }}</h2>
    
    <!-- Form đánh giá -->
    {% if user_has_purchased %}
    <div class="review-form">
        <h3>Viết đánh giá của bạn</h3>
        <form method="post">
            {% csrf_token %}
            <div class="rating-stars">
                <span>Chọn số sao:</span>
                {% for i in "54321" %}
                <input type="radio" name="rating" value="{{ i }}" id="star{{ i }}">
                <label for="star{{ i }}">⭐</label>
                {% endfor %}
            </div>
            <textarea name="comment" placeholder="Nhận xét của bạn..." required></textarea>
            <button type="submit">Gửi đánh giá</button>
        </form>
    </div>
    {% endif %}

    <!-- Danh sách reviews -->
    <div class="reviews-list">
        {% for review in reviews %}
        <div class="review-item">
            <div class="review-header">
                <strong>{{ review.user.username }}</strong>
                <div class="stars">{% for i in "12345" %}⭐{% if forloop.counter <= review.rating %}{% endif %}{% endfor %}</div>
                <span>{{ review.created_at|date:"d/m/Y" }}</span>
            </div>
            <p>{{ review.comment }}</p>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}